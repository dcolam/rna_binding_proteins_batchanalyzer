language: python
python:
  - "2.7"

dist: trusty
sudo: required
 
cache: pip
install:
 - pip install biopython
 - pip install mygene
 - pip install selenium
 
before_script:
 - "export DISPLAY=:99.0"
 - "sh -e /etc/init.d/xvfb start"
 
before_install:  
 - export CHROME_BIN=/usr/bin/google-chrome 
 - sudo apt-get update 
 - sudo apt-get install -y libappindicator1 fonts-liberation
 - wget -q -O - https://dl-ssl.google.com/linux/linux_signing_key.pub | sudo apt-key add -
 - sudo sh -c 'echo "deb http://dl.google.com/linux/chrome/deb/ stable main" >> /etc/apt/sources.list.d/google.list'
 - sudo apt-get update
 - sudo apt-get install google-chrome-stable
 
env:
 global:
    - CHROME_REVISION=`curl -s http://commondatastorage.googleapis.com/chromium-browser-snapshots/Linux_x64/LAST_CHANGE`
    - CHROMEDRIVER_VERSION=`curl -s http://chromedriver.storage.googleapis.com/LATEST_RELEASE`
    - PATH=$PATH:$PWD/chrome-linux
 
script:
 - export CHROME_REVISION=`curl -s http://commondatastorage.googleapis.com/chromium-browser-snapshots/Linux_x64/LAST_CHANGE`
 - export CHROMEDRIVER_VERSION=`curl -s http://chromedriver.storage.googleapis.com/LATEST_RELEASE`
 - curl -L -O "http://commondatastorage.googleapis.com/chromium-browser-snapshots/Linux_x64/${CHROME_REVISION}/chrome-linux.zip"
 - unzip chrome-linux.zip

 - curl -L -O "http://chromedriver.storage.googleapis.com/${CHROMEDRIVER_VERSION}/chromedriver_linux64.zip"
 - unzip -o chromedriver_linux64.zip

 - chmod +x chromedriver
 - mv chromedriver chrome-linux/chromedriver
 - export PATH=$PATH:$PWD/chrome-linux

 - export CHROME_BINARY=$PWD/chrome-linux/chrome
 - export CHROMEDRIVER=$PWD/chrome-linux/chromedriver
 - python Starter.py Gene_acd_ensemble_ID.csv
 
before deploy:
 - zip -r Output.zip $TRAVIS_BUILD_DIR/Output
  
deploy:
  provider: releases
  api_key:
    secure: "D+QWPJqEDqQqC+sGBmD007cHp8uGTFqVKYT0dsXmMcV1KCCwqQIR6qiniVUJa8/UF4Yp9/RbKowUcldjL74uVJJFtxKYBsS3o5KU/EBPWyLhYd0yG6IssaqkCZXRMl9LrDNRJkBpkb/4lLWk7PNjGdzZZgBE7YXDepFnPbIVYZBxsKQZ3Trsd+pQfJSTJKkVz8LcDvt5nmRDPIkNNKZUuahPxzUQqU9RwU5mpI1ZVMM/fOo6wYA/ms5cBt4ChnnS4jYugp0I0lLSMPtA/2FsbmFYJ0JhkDbJpv+ef/xH/VH4LekJozGN91l0X3NVdAsKNPRxFANvNiFKzGSX6sHaX/NhQeTn8wZoIDiX4DEMt5PM4O1r8PF822ta2VV/x/AX1Dz4zITghZ8Pm3aQYTqGe3RB63bo0w1NflM2Y0epcAudvI+iq28goyM1gt2Gu89le/gZGU8nKTReyvfb/Uc5vcD6E9INYsIZt6xPCGmX7H0dnbnG63YfqhFBwtMfoGP3dDJMykThNvaJ6k4HuwA7mVZ7zj7xlw3QN9t0/kgWgXMCpBqF1jDuRBKJSKgC5N3sc3RajXOsY54/Pgli8TgcylvVbXj/JlZOXxd2IkOsJT4fk8raRo0VwaObdDF60SG4lKDPTjX+1KRhNpb9SjoyGasCAczfgOwxT0s6dpbGvL0="
  file:
   - Output.zip
  skip_cleanup: true
  on:
    tags: true
    
notifications:
 on success: never

